<ion-header translucent class="hide-lg hide-xl">
  <ion-toolbar fixed [color]="userThemeColorPrimary">
    <ion-buttons slot="start">
      <ion-back-button icon="chevron-back" defaultHref="/my-requests"></ion-back-button>
      <ion-title>Request detail</ion-title>
    </ion-buttons>
    <ion-text slot="end" class="ion-padding" (click)="editRequest()">edit</ion-text>
  </ion-toolbar>
</ion-header>

<ion-content class="ion-no-padding ion-justify-content-center ion-align-items-center" color="medium">
  <ion-item lines="none" [color]="userThemeColorPrimary" class="ion-align-items-center">
    <ion-text class="ion-no-padding ion-padding-top ion-padding-start ion-no-margin ion-margin-start ion-margin-top"
      slot="start">
      <h5 *ngIf="requestData.type=='G'">
        <ion-icon size="large" name="cart"></ion-icon> Grocery Request
      </h5>
      <h5 *ngIf="requestData.type=='M'">
        <ion-icon size="large" name="medkit"></ion-icon> Medicine Request
      </h5>
    </ion-text>
    <ion-text slot="end" class="ion-padding-top ion-no-margin ion-margin-top ion-margin-end">100 SEK</ion-text>
  </ion-item>
  <ion-item lines="none" [color]="userThemeColorPrimary"
    class="request-desc-box ion-no-padding ion-no-margin ion-text-wrap">
    <ion-text
      class="request-desc-text ion-padding ion-margin-top ion-margin-bottom ion-justify-content-center ion-align-items-center"
      [ngClass]="userType">
      {{ requestData.description }}
    </ion-text>
  </ion-item>
  <ion-item class="deadline-date ion-justify-content-center ion-align-items-center" [color]="userThemeColorSecondary">
    <ion-text color="danger" class="ion-text-center"> Before
      {{ requestData.deadline | date: 'yyyy/M/d' }}
      {{ requestData.deadline | date:'h' }}:{{ requestData.deadline | date:'mm' }} {{ requestData.deadline |
      date:'aa' }}
    </ion-text>
  </ion-item>
  <ion-grid
    class="person ion-padding">
    <ion-row class="ion-no-padding ion-no-margin">
      <ion-text>
        <h5>Jonas Wang</h5>
        <!-- <h3> {{ requestData.assignee.user.firstName }} {{ requestData.assignee.user.lastName }}</h3> -->
      </ion-text>
    </ion-row>
    <ion-row class="ion-no-padding ion-no-margin">
      <ion-text color="themetext">+46 732-421-988 (call me)</ion-text>
      <!-- <ion-text color="themetext">
        {{ requestData.assignee.phone }} (call me)
      </ion-text> -->
    </ion-row>
    <ion-row class="ion-no-padding ion-no-margin">
      <ion-text color="themetext">Stora gata No.2, stockholm, SE</ion-text>
    </ion-row>
    <ion-row class="ion-margin-bottom" *ngIf="(userType==='AF') && (requestData.assignee !== null)">
      <ion-col size="5">
        <ion-text>
          <h5> Assignee Details </h5>
        </ion-text>
      </ion-col>
      <ion-col offset="1" size="6">
        <ion-row class="ion-justify-content-start ion-align-items-center ion-padding-bottom">
          <ion-icon name="person-circle-outline"></ion-icon>&nbsp;&nbsp;
          <ion-text>
            <h5><strong></strong></h5>
          </ion-text>
        </ion-row>
        <ion-row class="ion-justify-content-start ion-align-items-center"
          (click)="callAssignee(requestData.assignee.phone)">
          <ion-icon name="call-outline"></ion-icon>&nbsp;&nbsp;
          <ion-text>
            <h5></h5>
          </ion-text>
        </ion-row>
      </ion-col>
    </ion-row>
  </ion-grid>

  <ion-grid class="status ion-no-padding ion-no-margin">
    <ion-row class="ion-padding-horizontal">
      <ion-col size="6">
        <ion-text>
          <h6> Request status </h6>
        </ion-text>
      </ion-col>
      <ion-col size="6">
        <ion-text class="ion-text-end">
          <h6>
            <span [ngSwitch]="requestData.status">
              <span *ngSwitchCase="'P'" color="themetext">
                <ion-icon class="medium-icon" name="stopwatch" color="warning"></ion-icon>
                Waiting
              </span>
              <span *ngSwitchCase="'T'">
                <ion-icon class="medium-icon" name="bicycle"></ion-icon>
                On the way
              </span>
              <span *ngSwitchCase="'F'">
                <ion-icon class="medium-icon" name="checkmark-circle" color="success"></ion-icon>
                Finished
              </span>
              <span *ngSwitchCase="'C'">
                <ion-icon class="medium-icon" name="close-circle-outline" color="danger"></ion-icon>
                Cancelled
              </span>
              <span *ngSwitchDefault>
                <ion-icon class="medium-icon" name="bug-outline" color="danger"></ion-icon>
                Unknown
              </span>
            </span>
          </h6>
        </ion-text>
      </ion-col>
    </ion-row>
    <ion-row class="ion-margin-vertical ion-padding-horizontal">
      <ion-text>
        <strong>
          Teresa accept your request at 2:00pm, Saturday.
        </strong>
      </ion-text>
    </ion-row>
    <ion-row class="ion-margin-top ion-padding-horizontal">
      <ion-text>
        You will be called by our volunteer, if not please reach out to teresa directly 
      </ion-text>
      <ion-text color="themetext">
      +46 235-324-211
    </ion-text>
    </ion-row>
  </ion-grid>
</ion-content>

<ion-footer class="ion-no-border ion-padding-horizontal"
  *ngIf="(userType==='HL') && (requestData.status === 'P' || requestData.status === 'T')">
  <ion-toolbar>
    <ion-buttons slot="start">
      <ion-button (click)="displayRejectModal()" [color]="userThemeColorPrimary"> cancel delivery </ion-button>
    </ion-buttons>
    <ion-buttons slot="end">
      <ion-button (click)="displayResolveModal()" [color]="userThemeColorPrimary" fill="solid" size="large">resolve
        request</ion-button>
    </ion-buttons>
  </ion-toolbar>
</ion-footer>
<ion-footer class="ion-no-border ion-padding-horizontal ion-justify-content-center ion-align-items-center"
  *ngIf="(userType==='AF') && (requestData.status === 'P' || requestData.status === 'T')">
  <ion-row class="ion-justify-content-center ion-padding-vertical">
    <ion-col size-md="4" size-lg="3" size-xs="6">
      <ion-button (click)="displayCloseRequestModal()" [color]="userThemeColorSecondary" strong="true" size="large"
        shape="round">
        close request
      </ion-button>
    </ion-col>
  </ion-row>
</ion-footer>
